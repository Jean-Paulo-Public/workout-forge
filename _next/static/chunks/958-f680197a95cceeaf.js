"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[958],{5342:(e,t,s)=>{s.d(t,{AppProvider:()=>u,U:()=>c});var r=s(5155),a=s(2115),i=s(3343),o=s(2873);let d=(0,a.createContext)(void 0),l=()=>crypto.randomUUID(),n={defaultSets:3,defaultReps:"8",defaultRestAlarmSeconds:180};function u(e){let{children:t}=e,[s,u]=(0,a.useState)([]),[c,m]=(0,a.useState)([]),[p,f]=(0,a.useState)(n),[h,S]=(0,a.useState)(!1);(0,a.useEffect)(()=>{S(!0);let e=localStorage.getItem("workouts");e&&u(JSON.parse(e));let t=localStorage.getItem("sessions");t&&m(JSON.parse(t));let s=localStorage.getItem("userSettings");s?f(e=>({...n,...JSON.parse(s)})):f(n)},[]),(0,a.useEffect)(()=>{h&&localStorage.setItem("workouts",JSON.stringify(s))},[s,h]),(0,a.useEffect)(()=>{h&&localStorage.setItem("sessions",JSON.stringify(c))},[c,h]),(0,a.useEffect)(()=>{h&&localStorage.setItem("userSettings",JSON.stringify(p))},[p,h]);let g=e=>s.find(t=>t.id===e),T=(0,a.useCallback)((e,t,s)=>{m(r=>r.map(r=>r.id===e?{...r,exercisePerformances:r.exercisePerformances.map(e=>{if(e.exerciseId===t){let t={...e},{logNewRestTime:r,...a}=s;if("number"==typeof r){let e=[...t.restTimes||[],r];e.length>3&&e.shift(),t.restTimes=e}return void 0!==s.restTimes&&(t.restTimes=s.restTimes),t={...t,...a}}return e})}:r))},[]),v=(0,a.useCallback)(e=>{m(t=>t.map(t=>t.id===e?{...t,isGlobalWarmupCompleted:!0,notes:"".concat(t.notes||""," Aquecimento geral conclu\xeddo.")}:t))},[]),x=(0,a.useCallback)(e=>{m(t=>t.map(t=>t.id===e?{...t,isGlobalWarmupCompleted:!1,notes:(t.notes||"").replace(" Aquecimento geral conclu\xeddo.","")+" Aquecimento geral desfeito."}:t))},[]),w=(0,a.useCallback)((e,t)=>{for(let s of c.filter(t=>t.workoutId===e&&t.isCompleted).sort((e,t)=>new Date(t.date).getTime()-new Date(e.date).getTime())){let e=s.exercisePerformances.find(e=>e.exerciseId===t);if(e&&void 0!==e.weightUsed)return e.weightUsed}},[c]),I=(0,a.useCallback)(function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:30,s=new Date,r=new Date(s);r.setDate(s.getDate()-t);let a=[];return(c.forEach(t=>{if(t.isCompleted){let d=(0,i.H)(t.date);(0,o.v)(d,{start:r,end:s})&&t.exercisePerformances.forEach(t=>{t.exerciseId===e&&t.restTimes&&t.restTimes.length>0&&t.restTimes.forEach(e=>{"number"!=typeof e||isNaN(e)||a.push(e)})})}}),0===a.length)?null:Math.round(a.reduce((e,t)=>e+t,0)/a.length)},[c]);return h?(0,r.jsx)(d.Provider,{value:{workouts:s,addWorkout:e=>{let t={...e,id:l(),exercises:e.exercises.map(e=>({...e,id:e.id||l()})),daysForDeadline:e.daysForDeadline||void 0,repeatFrequencyDays:e.repeatFrequencyDays||void 0};u(e=>[...e,t])},updateWorkout:e=>{let t={...e,daysForDeadline:e.daysForDeadline||void 0,repeatFrequencyDays:e.repeatFrequencyDays||void 0,deadline:e.deadline||void 0,hasGlobalWarmup:void 0===e.hasGlobalWarmup||e.hasGlobalWarmup,exercises:e.exercises.map(e=>({...e,id:e.id||l(),hasWarmup:e.hasWarmup||!1}))};u(e=>e.map(e=>e.id===t.id?t:e)),m(e=>e.map(e=>{if(e.workoutId===t.id&&!e.isCompleted){let s=t.exercises.map(t=>{let s=e.exercisePerformances.find(e=>e.exerciseId===t.id);return s?{...s,exerciseName:t.name,hasWarmup:t.hasWarmup||!1,plannedWeight:t.weight||"0"}:{exerciseId:t.id,exerciseName:t.name,plannedWeight:t.weight||"0",weightUsed:t.weight||"0",hasWarmup:t.hasWarmup||!1,isWarmupCompleted:!1,isExerciseCompleted:!1,restTimes:[]}}).filter(e=>t.exercises.some(t=>t.id===e.exerciseId));return{...e,workoutName:t.name,exercisePerformances:s}}return e}))},deleteWorkout:e=>{u(t=>t.filter(t=>t.id!==e))},getWorkoutById:g,updateWorkoutsOrder:e=>{u(e)},sessions:c,addSession:e=>{let t=g(e.workoutId);if(!t){console.error("Workout not found for session:",e.workoutId);return}let s=t.exercises.map(e=>({exerciseId:e.id,exerciseName:e.name,plannedWeight:e.weight||"0",weightUsed:e.weight||"0",hasWarmup:e.hasWarmup||!1,isWarmupCompleted:!1,isExerciseCompleted:!1,restTimes:[]})),r={...e,id:l(),isCompleted:!1,notes:"Sess\xe3o de ".concat(e.workoutName," iniciada."),exercisePerformances:s,isGlobalWarmupCompleted:!t.hasGlobalWarmup&&void 0};m(e=>[r,...e])},updateSessionExercisePerformance:T,markGlobalWarmupAsCompleted:v,undoGlobalWarmup:x,completeSession:e=>{m(t=>t.map(t=>t.id===e?{...t,isCompleted:!0,notes:"".concat(t.notes||""," Treino finalizado e performance registrada.")}:t))},deleteSession:e=>{m(t=>t.filter(t=>t.id!==e))},getSessionById:e=>c.find(t=>t.id===e),hasActiveSession:e=>c.some(t=>t.workoutId===e&&!t.isCompleted),getLastUsedWeightForExercise:w,getAverageRestTimeForExercise:I,userSettings:p,updateUserSettings:e=>{f(t=>({...t,...e,defaultRestAlarmSeconds:void 0!==e.defaultRestAlarmSeconds?Number(e.defaultRestAlarmSeconds):t.defaultRestAlarmSeconds}))}},children:t}):null}function c(){let e=(0,a.useContext)(d);if(void 0===e)throw Error("useAppContext must be used within an AppProvider");return e}},7481:(e,t,s)=>{s.d(t,{dj:()=>m});var r=s(2115);let a=0,i=new Map,o=e=>{if(i.has(e))return;let t=setTimeout(()=>{i.delete(e),u({type:"REMOVE_TOAST",toastId:e})},1e6);i.set(e,t)},d=(e,t)=>{switch(t.type){case"ADD_TOAST":return{...e,toasts:[t.toast,...e.toasts].slice(0,1)};case"UPDATE_TOAST":return{...e,toasts:e.toasts.map(e=>e.id===t.toast.id?{...e,...t.toast}:e)};case"DISMISS_TOAST":{let{toastId:s}=t;return s?o(s):e.toasts.forEach(e=>{o(e.id)}),{...e,toasts:e.toasts.map(e=>e.id===s||void 0===s?{...e,open:!1}:e)}}case"REMOVE_TOAST":if(void 0===t.toastId)return{...e,toasts:[]};return{...e,toasts:e.toasts.filter(e=>e.id!==t.toastId)}}},l=[],n={toasts:[]};function u(e){n=d(n,e),l.forEach(e=>{e(n)})}function c(e){let{...t}=e,s=(a=(a+1)%Number.MAX_SAFE_INTEGER).toString(),r=()=>u({type:"DISMISS_TOAST",toastId:s});return u({type:"ADD_TOAST",toast:{...t,id:s,open:!0,onOpenChange:e=>{e||r()}}}),{id:s,dismiss:r,update:e=>u({type:"UPDATE_TOAST",toast:{...e,id:s}})}}function m(){let[e,t]=r.useState(n);return r.useEffect(()=>(l.push(t),()=>{let e=l.indexOf(t);e>-1&&l.splice(e,1)}),[e]),{...e,toast:c,dismiss:e=>u({type:"DISMISS_TOAST",toastId:e})}}},7740:(e,t,s)=>{s.d(t,{D:()=>d,ThemeProvider:()=>o});var r=s(5155),a=s(2115);let i=(0,a.createContext)(void 0);function o(e){let{children:t}=e,[s,o]=(0,a.useState)("light"),[d,l]=(0,a.useState)(!1);(0,a.useEffect)(()=>{l(!0);let e=localStorage.getItem("theme");e?o(e):o(window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light")},[]),(0,a.useEffect)(()=>{if(d){let e=window.document.documentElement;e.classList.remove("light","dark"),e.classList.add(s),localStorage.setItem("theme",s)}},[s,d]);let n=(0,a.useCallback)(e=>{d&&o(e)},[d]),u=(0,a.useCallback)(()=>{d&&o(e=>"light"===e?"dark":"light")},[d]);return d?(0,r.jsx)(i.Provider,{value:{theme:s,setTheme:n,toggleTheme:u},children:t}):(0,r.jsx)("div",{style:{visibility:"hidden"},children:t})}function d(){let e=(0,a.useContext)(i);if(void 0===e)throw Error("useTheme must be used within a ThemeProvider");return e}},9434:(e,t,s)=>{s.d(t,{cn:()=>i});var r=s(2596),a=s(9688);function i(){for(var e=arguments.length,t=Array(e),s=0;s<e;s++)t[s]=arguments[s];return(0,a.QP)((0,r.$)(t))}}}]);