(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[247],{594:(e,t,a)=>{"use strict";a.d(t,{A:()=>s});let s=(0,a(157).A)("Info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]])},2083:(e,t,a)=>{"use strict";a.d(t,{n:()=>i});var s=a(5476);function i(e,t){return+(0,s.a)(e)==+(0,s.a)(t)}},3300:(e,t,a)=>{"use strict";a.d(t,{A:()=>s});let s=(0,a(157).A)("Play",[["polygon",{points:"6 3 20 12 6 21 6 3",key:"1oa8hb"}]])},3482:(e,t,a)=>{"use strict";a.d(t,{Y:()=>i});var s=a(5476);function i(e,t){return+(0,s.a)(e)<+(0,s.a)(t)}},4258:(e,t,a)=>{Promise.resolve().then(a.bind(a,5717))},5717:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>I});var s=a(5155),i=a(2115),r=a(3505),n=a(285),d=a(6695),l=a(5342);let o=(0,a(157).A)("TriangleAlert",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);var c=a(594),u=a(9069),m=a(8328),h=a(3300),x=a(6874),y=a.n(x),p=a(5695),f=a(7481),g=a(2401),v=a(3343),j=a(831),D=a(2083),N=a(3482),b=a(9140),T=a(5476);function k(e,t){let a=e.getFullYear()-t.getFullYear()||e.getMonth()-t.getMonth()||e.getDate()-t.getDate()||e.getHours()-t.getHours()||e.getMinutes()-t.getMinutes()||e.getSeconds()-t.getSeconds()||e.getMilliseconds()-t.getMilliseconds();return a<0?-1:a>0?1:a}var w=a(2084),C=a(9340),M=a(3013),A=a(540),U=a(9434),q=a(6126);function I(){let{workouts:e,sessions:t,addSession:a,getWorkoutById:x,hasActiveSession:I}=(0,l.U)(),O=(0,p.useRouter)(),{toast:E}=(0,f.dj)(),[F,H]=(0,i.useState)([]);(0,i.useEffect)(()=>{let a=(0,g.R)(),s=e.filter(e=>{let s=t.filter(t=>t.workoutId===e.id&&t.isCompleted);if(e.repeatFrequencyDays&&e.repeatFrequencyDays>0&&0===s.length||e.deadline&&0===s.length)return!0;if(!e.repeatFrequencyDays||e.repeatFrequencyDays<=0)return!1;let i=t.filter(t=>t.workoutId===e.id&&t.isCompleted).sort((e,t)=>new Date(t.date).getTime()-new Date(e.date).getTime());if(0===i.length)return!0;let r=(0,g.R)((0,v.H)(i[0].date)),n=(0,j.f)(r,e.repeatFrequencyDays);return(0,D.n)(a,n)||(0,N.Y)(n,a)}).map(e=>{let t,s=!1,i=!1;if(e.deadline){let r=(0,v.H)(e.deadline);s=(0,N.Y)(r,a),t=function(e,t){let a=(0,T.a)(e),s=(0,T.a)(t),i=k(a,s),r=Math.abs((0,b.m)(a,s));a.setDate(a.getDate()-i*r);let n=Number(k(a,s)===-i),d=i*(r-n);return 0===d?0:d}(r,a),i=(0,C.r)(r,(0,w.w)(r,Date.now()))}return{...e,isOverdue:s,daysUntilDeadline:t,isTodayDeadline:i}});s.sort((e,t)=>{if(e.isOverdue&&!t.isOverdue)return -1;if(!e.isOverdue&&t.isOverdue)return 1;if(e.isOverdue&&t.isOverdue){var a,s;return(null!==(a=e.daysUntilDeadline)&&void 0!==a?a:-1/0)-(null!==(s=t.daysUntilDeadline)&&void 0!==s?s:-1/0)}if(e.isTodayDeadline&&!t.isTodayDeadline)return -1;if(!e.isTodayDeadline&&t.isTodayDeadline)return 1;if(e.isTodayDeadline&&t.isTodayDeadline)return e.name.localeCompare(t.name);let i=!e.isOverdue&&!e.isTodayDeadline&&1===e.daysUntilDeadline,r=!t.isOverdue&&!t.isTodayDeadline&&1===t.daysUntilDeadline;return i&&!r?-1:!i&&r?1:i&&r?e.name.localeCompare(t.name):void 0!==e.daysUntilDeadline&&void 0===t.daysUntilDeadline?-1:void 0===e.daysUntilDeadline&&void 0!==t.daysUntilDeadline?1:void 0!==e.daysUntilDeadline&&void 0!==t.daysUntilDeadline?e.daysUntilDeadline===t.daysUntilDeadline?e.name.localeCompare(t.name):e.daysUntilDeadline-t.daysUntilDeadline:e.name.localeCompare(t.name)}),H(s)},[e,t]);let R=e=>{if(I(e.id)){E({title:"Treino J\xe1 Ativo",description:'O treino "'.concat(e.name,'" j\xe1 possui uma sess\xe3o em andamento. Finalize-a antes de iniciar uma nova.'),variant:"destructive"});return}let t=x(e.id);if(!t){E({title:"Erro",description:"N\xe3o foi poss\xedvel encontrar os detalhes do treino para inici\xe1-lo.",variant:"destructive"});return}a({workoutId:t.id,workoutName:t.name,date:new Date().toISOString()}),E({title:"Treino Iniciado!",description:"".concat(t.name," foi registrado. Acompanhe seu progresso!")}),O.push("/progress")};return(0,s.jsx)(r.e,{children:(0,s.jsxs)("div",{className:"space-y-6",children:[(0,s.jsx)("h1",{className:"text-3xl font-bold font-headline",children:"Esteira de Treinos"}),(0,s.jsx)(d.BT,{children:"Aqui est\xe3o os treinos prontos para serem feitos, considerando sua frequ\xeancia e datas limite. Treinos com deadline vencido, hoje, ou amanh\xe3 aparecem primeiro e destacados. Treinos com frequ\xeancia definida e nunca realizados tamb\xe9m s\xe3o listados."}),0===F.length?(0,s.jsxs)(d.Zp,{className:"text-center",children:[(0,s.jsx)(d.aR,{children:(0,s.jsxs)(d.ZB,{className:"font-headline flex items-center justify-center gap-2",children:[(0,s.jsx)(c.A,{className:"h-6 w-6 text-primary"}),"Esteira Vazia por Enquanto"]})}),(0,s.jsxs)(d.Wu,{children:[(0,s.jsx)("p",{className:"text-muted-foreground mb-2",children:"Nenhum treino est\xe1 pronto para ser repetido, n\xe3o h\xe1 treinos com deadline definidos para hoje/amanh\xe3/vencidos, ou todos os treinos com deadline e frequ\xeancia j\xe1 foram conclu\xeddos e aguardam o pr\xf3ximo ciclo."}),(0,s.jsxs)("p",{className:"text-sm text-muted-foreground",children:["Certifique-se de que seus treinos na ",(0,s.jsx)(y(),{href:"/library",className:"underline hover:text-primary",children:"biblioteca"})," tenham uma frequ\xeancia de repeti\xe7\xe3o e/ou uma data limite."]})]})]}):(0,s.jsx)("div",{className:"grid gap-6 md:grid-cols-2 lg:grid-cols-3",children:F.map(e=>{let t=function(e){let t="flex flex-col",a={statusText:"",cardClasses:t,alertIcon:void 0,deadlineTextColorClass:"text-muted-foreground"};return e.deadline&&(e.isOverdue?(a.statusText=" (Vencido)",a.cardClasses=(0,U.cn)(t,"border-red-500 ring-2 ring-red-500/50"),a.alertIcon=(0,s.jsx)(o,{className:"h-5 w-5 text-red-500",title:"Deadline Vencido!"}),a.deadlineTextColorClass="text-red-600 font-medium"):e.isTodayDeadline?(a.statusText=" (Hoje!)",a.cardClasses=(0,U.cn)(t,"border-orange-500 ring-2 ring-orange-500/50"),a.alertIcon=(0,s.jsx)(o,{className:"h-5 w-5 text-orange-500",title:"Deadline Hoje!"}),a.deadlineTextColorClass="text-orange-600 font-medium"):1===e.daysUntilDeadline?(a.statusText=" (Amanh\xe3!)",a.cardClasses=(0,U.cn)(t,"border-yellow-500 ring-2 ring-yellow-500/50"),a.alertIcon=(0,s.jsx)(o,{className:"h-5 w-5 text-yellow-500",title:"Deadline Amanh\xe3!"}),a.deadlineTextColorClass="text-yellow-600 font-medium"):void 0!==e.daysUntilDeadline&&e.daysUntilDeadline>1&&(a.statusText=" (em ".concat(e.daysUntilDeadline," dias)"))),a}(e),a=I(e.id);return(0,s.jsxs)(d.Zp,{className:t.cardClasses,children:[(0,s.jsxs)(d.aR,{children:[(0,s.jsxs)("div",{className:"flex justify-between items-start",children:[(0,s.jsxs)(d.ZB,{className:"font-headline flex items-center gap-2",children:[e.name,t.alertIcon]}),a&&(0,s.jsx)(q.E,{variant:"destructive",className:"text-xs ml-2",children:"ATIVO"})]}),e.description&&(0,s.jsx)(d.BT,{children:e.description}),(0,s.jsxs)("div",{className:"space-y-1",children:[e.repeatFrequencyDays&&(0,s.jsxs)(d.BT,{className:"text-xs text-muted-foreground flex items-center",children:[(0,s.jsx)(u.A,{className:"h-3 w-3 mr-1"})," Repetir a cada ",e.repeatFrequencyDays," dia(s)"]}),e.deadline&&(0,s.jsxs)(d.BT,{className:(0,U.cn)("text-xs flex items-center",t.deadlineTextColorClass),children:[(0,s.jsx)(m.A,{className:"h-3 w-3 mr-1"})," Deadline: ",(0,M.GP)((0,v.H)(e.deadline),"dd/MM/yyyy",{locale:A.F}),t.statusText]})]})]}),(0,s.jsxs)(d.Wu,{className:"flex-grow",children:[(0,s.jsxs)("h4",{className:"font-medium mb-1 text-sm",children:["Exerc\xedcios (",e.exercises.length,"):"]}),(0,s.jsxs)("ul",{className:"list-disc list-inside text-sm text-muted-foreground space-y-1 max-h-24 overflow-y-auto",children:[e.exercises.slice(0,2).map(e=>(0,s.jsx)("li",{className:"truncate",children:e.name},e.id)),e.exercises.length>2&&(0,s.jsxs)("li",{children:["...e mais ",e.exercises.length-2,"."]})]})]}),(0,s.jsx)(d.wL,{className:"flex flex-wrap gap-2 justify-end",children:(0,s.jsxs)(n.$,{variant:"default",size:"sm",onClick:()=>R(e),disabled:a,title:a?"Este treino j\xe1 est\xe1 em andamento":"Iniciar treino",children:[(0,s.jsx)(h.A,{className:"mr-1 h-4 w-4"})," ",a?"Em Andamento":"Iniciar Agora"]})})]},e.id)})})]})})}},6126:(e,t,a)=>{"use strict";a.d(t,{E:()=>d});var s=a(5155);a(2115);var i=a(2085),r=a(9434);let n=(0,i.F)("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function d(e){let{className:t,variant:a,...i}=e;return(0,s.jsx)("div",{className:(0,r.cn)(n({variant:a}),t),...i})}},8328:(e,t,a)=>{"use strict";a.d(t,{A:()=>s});let s=(0,a(157).A)("CalendarDays",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}],["path",{d:"M8 14h.01",key:"6423bh"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M8 18h.01",key:"lrp35t"}],["path",{d:"M12 18h.01",key:"mhygvu"}],["path",{d:"M16 18h.01",key:"kzsmim"}]])},9069:(e,t,a)=>{"use strict";a.d(t,{A:()=>s});let s=(0,a(157).A)("Repeat",[["path",{d:"m17 2 4 4-4 4",key:"nntrym"}],["path",{d:"M3 11v-1a4 4 0 0 1 4-4h14",key:"84bu3i"}],["path",{d:"m7 22-4-4 4-4",key:"1wqhfi"}],["path",{d:"M21 13v1a4 4 0 0 1-4 4H3",key:"1rx37r"}]])},9340:(e,t,a)=>{"use strict";a.d(t,{r:()=>i});var s=a(644);function i(e,t){return+(0,s.o)(e)==+(0,s.o)(t)}}},e=>{var t=t=>e(e.s=t);e.O(0,[668,607,162,147,567,131,441,684,358],()=>t(4258)),_N_E=e.O()}]);