(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[247],{594:(e,a,t)=>{"use strict";t.d(a,{A:()=>s});let s=(0,t(157).A)("Info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]])},2083:(e,a,t)=>{"use strict";t.d(a,{n:()=>r});var s=t(5476);function r(e,a){return+(0,s.a)(e)==+(0,s.a)(a)}},3300:(e,a,t)=>{"use strict";t.d(a,{A:()=>s});let s=(0,t(157).A)("Play",[["polygon",{points:"6 3 20 12 6 21 6 3",key:"1oa8hb"}]])},3482:(e,a,t)=>{"use strict";t.d(a,{Y:()=>r});var s=t(5476);function r(e,a){return+(0,s.a)(e)<+(0,s.a)(a)}},4258:(e,a,t)=>{Promise.resolve().then(t.bind(t,5717))},5717:(e,a,t)=>{"use strict";t.r(a),t.d(a,{default:()=>O});var s=t(5155),r=t(2115),n=t(3505),i=t(285),d=t(6695),l=t(5342);let o=(0,t(157).A)("TriangleAlert",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);var c=t(594),u=t(9069),m=t(8328),h=t(3300),x=t(6874),f=t.n(x),y=t(5695),p=t(7481),g=t(2401),v=t(3343),D=t(831),j=t(2083),N=t(3482),b=t(9140),k=t(5476);function w(e,a){let t=(0,k.a)(e),s=(0,k.a)(a),r=T(t,s),n=Math.abs((0,b.m)(t,s));t.setDate(t.getDate()-r*n);let i=Number(T(t,s)===-r),d=r*(n-i);return 0===d?0:d}function T(e,a){let t=e.getFullYear()-a.getFullYear()||e.getMonth()-a.getMonth()||e.getDate()-a.getDate()||e.getHours()-a.getHours()||e.getMinutes()-a.getMinutes()||e.getSeconds()-a.getSeconds()||e.getMilliseconds()-a.getMilliseconds();return t<0?-1:t>0?1:t}var F=t(2084),M=t(9340),A=t(3013),C=t(540),I=t(9434),E=t(6126);function O(){let{workouts:e,sessions:a,addSession:t,getWorkoutById:x,hasActiveSession:b}=(0,l.U)(),k=(0,y.useRouter)(),{toast:T}=(0,p.dj)(),[O,q]=(0,r.useState)([]);(0,r.useEffect)(()=>{let t=(0,g.R)(),s=e.filter(e=>{let s=a.filter(a=>a.workoutId===e.id&&a.isCompleted);if(e.repeatFrequencyDays&&e.repeatFrequencyDays>0&&0===s.length||e.daysForDeadline&&e.daysForDeadline>0&&0===s.length)return!0;if(e.repeatFrequencyDays&&e.repeatFrequencyDays>0&&s.length>0){let a=s.sort((e,a)=>new Date(a.date).getTime()-new Date(e.date).getTime()),r=(0,g.R)((0,v.H)(a[0].date)),n=(0,D.f)(r,e.repeatFrequencyDays);if((0,j.n)(t,n)||(0,N.Y)(n,t))return!0}return!!e.deadline&&0===s.length}).map(e=>{let s,r=!1,n=!1,i=null;if(e.deadline?i=(0,v.H)(e.deadline):e.daysForDeadline&&e.daysForDeadline>0&&0===a.filter(a=>a.workoutId===e.id&&a.isCompleted).length&&(i=(0,D.f)(t,e.daysForDeadline)),i){var d;r=(0,N.Y)(i,t),s=w(i,t),d=i,n=(0,M.r)(d,(0,F.w)(d,Date.now()))}return{...e,isOverdue:r,daysDifferenceFromDeadline:s,isTodayDeadline:n,deadline:null==i?void 0:i.toISOString()}});s.sort((e,a)=>{let t=e.deadline?(0,v.H)(e.deadline):null,s=a.deadline?(0,v.H)(a.deadline):null;if(e.isOverdue&&!a.isOverdue)return -1;if(!e.isOverdue&&a.isOverdue)return 1;if(e.isOverdue&&a.isOverdue){var r,n;return(null!==(r=e.daysDifferenceFromDeadline)&&void 0!==r?r:1/0)-(null!==(n=a.daysDifferenceFromDeadline)&&void 0!==n?n:1/0)}return e.isTodayDeadline&&!a.isTodayDeadline?-1:!e.isTodayDeadline&&a.isTodayDeadline?1:t&&s?(0,j.n)(t,s)?e.name.localeCompare(a.name):w(t,s):t?-1:s?1:e.name.localeCompare(a.name)}),q(s)},[e,a]);let H=e=>{if(b(e.id)){T({title:"Treino J\xe1 Ativo",description:'O treino "'.concat(e.name,'" j\xe1 possui uma sess\xe3o em andamento. Finalize-a antes de iniciar uma nova.'),variant:"destructive"});return}let a=x(e.id);if(!a){T({title:"Erro",description:"N\xe3o foi poss\xedvel encontrar os detalhes do treino para inici\xe1-lo.",variant:"destructive"});return}t({workoutId:a.id,workoutName:a.name,date:new Date().toISOString()}),T({title:"Treino Iniciado!",description:"".concat(a.name," foi registrado. Acompanhe seu progresso!")}),k.push("/progress")};return(0,s.jsx)(n.e,{children:(0,s.jsxs)("div",{className:"space-y-6",children:[(0,s.jsx)("h1",{className:"text-3xl font-bold font-headline",children:"Esteira de Treinos"}),(0,s.jsx)(d.BT,{children:"Treinos prontos para serem feitos, considerando seus dias de descanso m\xednimo e datas limite. Treinos com deadline vencido, hoje ou para breve aparecem primeiro e destacados. Treinos com frequ\xeancia/dias para deadline definidos e nunca realizados tamb\xe9m s\xe3o listados."}),0===O.length?(0,s.jsxs)(d.Zp,{className:"text-center",children:[(0,s.jsx)(d.aR,{children:(0,s.jsxs)(d.ZB,{className:"font-headline flex items-center justify-center gap-2",children:[(0,s.jsx)(c.A,{className:"h-6 w-6 text-primary"}),"Esteira Vazia por Enquanto"]})}),(0,s.jsx)(d.Wu,{children:(0,s.jsxs)("p",{className:"text-muted-foreground mb-2",children:["Nenhum treino dispon\xedvel. Verifique se seus treinos na ",(0,s.jsx)(f(),{href:"/library",className:"underline hover:text-primary",children:"biblioteca"}),' t\xeam "Dias para Deadline" e/ou "Dias de Descanso M\xednimo" configurados, ou se os treinos conclu\xeddos j\xe1 cumpriram o descanso m\xednimo.']})})]}):(0,s.jsx)("div",{className:"grid gap-6 md:grid-cols-2 lg:grid-cols-3",children:O.map(e=>{let a=function(e){let a="flex flex-col",t={statusText:"",cardClasses:a,alertIcon:void 0,deadlineTextColorClass:"text-muted-foreground"};return e.deadline&&(e.isOverdue?(t.statusText=" (Vencido h\xe1 ".concat(Math.abs(e.daysDifferenceFromDeadline)," dia(s))"),t.cardClasses=(0,I.cn)(a,"border-red-500 ring-2 ring-red-500/50"),t.alertIcon=(0,s.jsx)(o,{className:"h-5 w-5 text-red-500",title:"Deadline Vencido!"}),t.deadlineTextColorClass="text-red-600 font-medium"):e.isTodayDeadline?(t.statusText=" (Hoje!)",t.cardClasses=(0,I.cn)(a,"border-orange-500 ring-2 ring-orange-500/50"),t.alertIcon=(0,s.jsx)(o,{className:"h-5 w-5 text-orange-500",title:"Deadline Hoje!"}),t.deadlineTextColorClass="text-orange-600 font-medium"):1===e.daysDifferenceFromDeadline?(t.statusText=" (Amanh\xe3!)",t.cardClasses=(0,I.cn)(a,"border-yellow-500 ring-2 ring-yellow-500/50"),t.alertIcon=(0,s.jsx)(o,{className:"h-5 w-5 text-yellow-500",title:"Deadline Amanh\xe3!"}),t.deadlineTextColorClass="text-yellow-600 font-medium"):void 0!==e.daysDifferenceFromDeadline&&e.daysDifferenceFromDeadline>1&&(t.statusText=" (em ".concat(e.daysDifferenceFromDeadline," dia(s))"))),t}(e),t=b(e.id);return(0,s.jsxs)(d.Zp,{className:a.cardClasses,children:[(0,s.jsxs)(d.aR,{children:[(0,s.jsxs)("div",{className:"flex justify-between items-start",children:[(0,s.jsxs)(d.ZB,{className:"font-headline flex items-center gap-2",children:[e.name,a.alertIcon]}),t&&(0,s.jsx)(E.E,{variant:"destructive",className:"text-xs ml-2",children:"ATIVO"})]}),e.description&&(0,s.jsx)(d.BT,{children:e.description}),(0,s.jsxs)("div",{className:"space-y-1",children:[e.repeatFrequencyDays&&(0,s.jsxs)(d.BT,{className:"text-xs text-muted-foreground flex items-center",children:[(0,s.jsx)(u.A,{className:"h-3 w-3 mr-1"})," Descanso m\xednimo: ",e.repeatFrequencyDays," dia(s)"]}),e.daysForDeadline&&!e.deadline&&(0,s.jsxs)(d.BT,{className:"text-xs text-muted-foreground flex items-center",children:[(0,s.jsx)(m.A,{className:"h-3 w-3 mr-1"})," Prazo em: ",e.daysForDeadline," dia(s) (a partir de hoje/conclus\xe3o)"]}),e.deadline&&(0,s.jsxs)(d.BT,{className:(0,I.cn)("text-xs flex items-center",a.deadlineTextColorClass),children:[(0,s.jsx)(m.A,{className:"h-3 w-3 mr-1"})," Deadline: ",(0,A.GP)((0,v.H)(e.deadline),"dd/MM/yyyy",{locale:C.F}),a.statusText]})]})]}),(0,s.jsxs)(d.Wu,{className:"flex-grow",children:[(0,s.jsxs)("h4",{className:"font-medium mb-1 text-sm",children:["Exerc\xedcios (",e.exercises.length,"):"]}),(0,s.jsxs)("ul",{className:"list-disc list-inside text-sm text-muted-foreground space-y-1 max-h-24 overflow-y-auto",children:[e.exercises.slice(0,2).map(e=>(0,s.jsx)("li",{className:"truncate",children:e.name},e.id)),e.exercises.length>2&&(0,s.jsxs)("li",{children:["...e mais ",e.exercises.length-2,"."]})]})]}),(0,s.jsx)(d.wL,{className:"flex flex-wrap gap-2 justify-end",children:(0,s.jsxs)(i.$,{variant:"default",size:"sm",onClick:()=>H(e),disabled:t,title:t?"Este treino j\xe1 est\xe1 em andamento":"Iniciar treino",children:[(0,s.jsx)(h.A,{className:"mr-1 h-4 w-4"})," ",t?"Em Andamento":"Iniciar Agora"]})})]},e.id)})})]})})}},6126:(e,a,t)=>{"use strict";t.d(a,{E:()=>d});var s=t(5155);t(2115);var r=t(2085),n=t(9434);let i=(0,r.F)("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function d(e){let{className:a,variant:t,...r}=e;return(0,s.jsx)("div",{className:(0,n.cn)(i({variant:t}),a),...r})}},8328:(e,a,t)=>{"use strict";t.d(a,{A:()=>s});let s=(0,t(157).A)("CalendarDays",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}],["path",{d:"M8 14h.01",key:"6423bh"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M8 18h.01",key:"lrp35t"}],["path",{d:"M12 18h.01",key:"mhygvu"}],["path",{d:"M16 18h.01",key:"kzsmim"}]])},9069:(e,a,t)=>{"use strict";t.d(a,{A:()=>s});let s=(0,t(157).A)("Repeat",[["path",{d:"m17 2 4 4-4 4",key:"nntrym"}],["path",{d:"M3 11v-1a4 4 0 0 1 4-4h14",key:"84bu3i"}],["path",{d:"m7 22-4-4 4-4",key:"1wqhfi"}],["path",{d:"M21 13v1a4 4 0 0 1-4 4H3",key:"1rx37r"}]])},9340:(e,a,t)=>{"use strict";t.d(a,{r:()=>r});var s=t(644);function r(e,a){return+(0,s.o)(e)==+(0,s.o)(a)}}},e=>{var a=a=>e(e.s=a);e.O(0,[668,988,162,147,567,958,607,441,684,358],()=>a(4258)),_N_E=e.O()}]);